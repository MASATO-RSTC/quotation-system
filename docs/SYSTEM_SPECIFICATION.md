# 見積書作成システム仕様書兼要件定義ドキュメント

## 1. システム概要

本システムは、エンジニア派遣における見積書作成業務を効率化するためのWebアプリケーションです。複雑な単価計算ロジック（時給・月給、各種割増・控除、丸め処理など）を自動化し、データの一元管理と運用ルールの統一を目指します。

## 2. 見積書入力フォーム (`src/app/page.tsx`)

### 2.1. フォームの構成と項目

- **スタッフ・契約情報**
  - `契約種別` (ドロップダウン選択: 「時給」, 「月時（上限あり下限あり）」, 「月時（完全固定）」, etc.)
- **丸め・精算設定**
  - `金額丸め単位`, `丸め方法` - **「月時（完全固定）」では非表示**

（その他、契約種別に応じて多数の項目が表示/非表示に切り替わる）

## 3. 計算ロジック (`src/utils/calculations.ts`)

- **月時（完全固定）**: 計算処理は行われない。

## 4. PDF出力 (`src/utils/generateQuotationPdf.ts`)

- **明細テーブル**:
    - **月時（上限あり下限あり）契約**: 月給単価、時間幅（例: 140h 〜 180h）、超過単価、控除単価を表示。
    - **月時（上限あり下限なし）契約**: 月給単価、時間幅（例: 下限なし〜180h）、超過単価を表示。
    - **月時（上限なし下限あり）契約**: 月給単価、時間幅（例: 140h〜上限なし）、控除単価を表示。
    - **月時（完全固定）契約**: 月給単価、時間幅（「完全固定」と表示）を表示。

## 6. 契約種別ごとの詳細仕様

### 6.2. 月時契約

#### 6.2.1. 月時（上限あり下限あり）
*   **概要:** 上限と下限を設けた契約形態。

#### 6.2.2. 月時（上限あり下限なし）
*   **概要:** 上限のみを設けた契約形態。

#### 6.2.3. 月時（上限なし下限あり）
*   **概要:** 下限のみを設けた契約形態。

#### 6.2.4. 月時（完全固定）
*   **概要:** 時間による超過・控除の概念がない完全固定の月給制。
*   **入力項目:** `月給単価`など基本項目のみ。時間や可変単価に関する項目はすべて非表示となる。
*   **PDF表示:** 明細テーブルの「時間幅」は「完全固定」と表示される。